import {hyper} from 'hyperhtml';
import {BiotopeReduxStoreConnector} from "../../resources/ts/core/BiotopeReduxStoreConnector";
import {{pascalCase name}}ReducerCreator from './{{pascalCase name}}.reducer';
import { {{pascalCase name}}State } from './{{pascalCase name}}.state';

import './{{pascalCase name}}.styles.scss';

export class {{pascalCase name}} extends HTMLElement {
	static componentName = '{{component (dashCase name)}}';
	private html: any;
	private uid: string;
	private storeConnector: BiotopeReduxStoreConnector<{{pascalCase name}}State>;

	constructor() {
		super();
		this.html = hyper.bind(this);
	}

	connectedCallback() {
		this.storeConnector = new BiotopeReduxStoreConnector<{{pascalCase name}}State>({
			store: window['biotope'].store,
			componentId: this.uid,
			reducerCreator: {{pascalCase name}}ReducerCreator,
			triggerOnStateChange: (state: {{pascalCase name}}State, lastState: {{pascalCase name}}State) => {}
		});
		this.uid = this.storeConnector.getComponentId();

    this.render(this.storeConnector.getState());
	}

  render(state: {{properCase name}}State) {
    return this.html`{{properCase name}}`;
  }
}
if (!customElements.get({{pascalCase name}}.componentName)) {
	customElements.define({{pascalCase name}}.componentName, {{pascalCase name}});
}
